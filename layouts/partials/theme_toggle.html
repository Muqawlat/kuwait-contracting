<button id="theme-toggle" class="theme-toggle-btn" aria-label="Toggle Dark Mode">
    <span id="icon-moon">ğŸŒ™</span>
    <span id="icon-sun" style="display: none;">â˜€ï¸</span>
</button>

<script>
    (function() {
        // 1. ØªØ­Ø¯ÙŠØ¯ Ø§Ù„Ø¹Ù†Ø§ØµØ±
        const toggleBtn = document.getElementById('theme-toggle');
        const iconMoon = document.getElementById('icon-moon');
        const iconSun = document.getElementById('icon-sun');
        const htmlEl = document.documentElement;

        // 2. Ø¯Ø§Ù„Ø© Ù„ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø£ÙŠÙ‚ÙˆÙ†Ø© Ø¨Ù†Ø§Ø¡Ù‹ Ø¹Ù„Ù‰ Ø§Ù„ÙˆØ¶Ø¹
        function updateIcon(theme) {
            if (theme === 'dark') {
                iconMoon.style.display = 'none';
                iconSun.style.display = 'inline';
            } else {
                iconMoon.style.display = 'inline';
                iconSun.style.display = 'none';
            }
        }

        // 3. Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„ØªÙØ¶ÙŠÙ„ Ø§Ù„Ù…Ø­ÙÙˆØ¸ Ø£Ùˆ ØªÙØ¶ÙŠÙ„ Ø§Ù„Ù†Ø¸Ø§Ù… Ø¹Ù†Ø¯ Ø§Ù„ØªØ­Ù…ÙŠÙ„
        const savedTheme = localStorage.getItem('theme');
        const systemPrefersDark = window.matchMedia('(prefers-color-scheme: dark)').matches;

        let currentTheme = 'light';

        if (savedTheme) {
            currentTheme = savedTheme;
        } else if (systemPrefersDark) {
            currentTheme = 'dark';
        }

        // ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„Ø«ÙŠÙ…
        htmlEl.setAttribute('data-theme', currentTheme);
        updateIcon(currentTheme);

        // 4. Ø¹Ù†Ø¯ Ø§Ù„Ø¶ØºØ· Ø¹Ù„Ù‰ Ø§Ù„Ø²Ø±
        toggleBtn.addEventListener('click', () => {
            const activeTheme = htmlEl.getAttribute('data-theme');
            const newTheme = activeTheme === 'dark' ? 'light' : 'dark';
            
            htmlEl.setAttribute('data-theme', newTheme);
            localStorage.setItem('theme', newTheme); // Ø­ÙØ¸ Ø§Ù„Ø§Ø®ØªÙŠØ§Ø±
            updateIcon(newTheme);
        });
    })();
</script>
